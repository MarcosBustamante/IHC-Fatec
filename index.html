<!DOCTYPE html>
<html ng-app ng-controller="index_ctr">
	<head>
		<title> FastFind - Your desires on a screen </title>
		<meta name="keywords" content="produtos products produto product venda vendas sell loja shopping pesquisa">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8">
		<!-- CSS -->
		<link rel="stylesheet" href="css/block_product.css">
		<link rel="stylesheet" href="css/list_product.css">
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/animation.css">
		<link rel="stylesheet" href="css/menu.css">
		<link rel="stylesheet" href="css/button_product.css">
		<link rel="stylesheet" href="css/foundation.min.css">

		<!-- js -->
		<script src="angular.js"></script>
		<script src="index.js"></script>
		<script src="js/jquery.js"></script>
		<script src="js/vendor/jquery.js"></script>		
		<script src="js/foundation.min.js"></script>
		<script src="js/foundation/foundation.js"></script>
		<script src="js/foundation/foundation.dropdown.js"></script>
		<script src="js/foundation/foundation.reveal.js"></script>
		<script>
				$('a.reveal-link').trigger('click');
				$('a.close-reveal-modal').trigger('click');
				$('#myModal').foundation('reveal', 'open');
				$('#myModal').foundation('reveal', 'close');
 		</script>
	</head>
	<body>
		<div class="reveal-modal-bg" style="display: none"></div>

		<!-- Modal para conectar ao Facebook -->
		<div id="myModal" class="reveal-modal" data-reveal>
  			<h2 align="center">Já possui uma conta? Faça seu login</h2>
			<img src="img/fico.png" style="float: left;" alt="Entre na sua conta pelo Facebook"/>
			<img src="img/gico.png" style="float: left;" alt="Entre na sua conta pelo Google Account"/>
			<p>
			<center><input type="text" style="width: 400px;"placeholder="Usuário ou E-mail"/> <p>
			<input type="text" style="width: 400px;" placeholder="Senha"/> <p>
			<input type="submit" value="Entrar" style="background: #2E8B57; font-size: 15px;"> 
			<h3> Ou cadastre-se aqui </h3> </center>
			<a class="close-reveal-modal"> &#215; </a>
		</div>

		<!-- Navbar -->
		<div id="navbar">
			<div id="navbar-topspace"> </div>
			<div class="button profile-menu-button" ng-click="active_menu[0] = !active_menu[0]"> </div>
			<div class="button filter-menu-button" ng-click="active_menu[1] = !active_menu[1]"></div>
			<div class="show-for-small-only">
				<div id="navbar-minitext"> FastFind</div>
				<input type="submit" value="ENTRAR" style="position: absolute; right: 70px; top: 15px; border-radius: 6px;"/>
			</div>

			<div class="hide-for-small-only">
				<input type="submit" value="ENTRAR" style="cursor: pointer; position: absolute; right: 70px; top: 15px;" data-reveal-id="myModal" data-reveal/>
				<div id="navbar-text" align="center"> FastFind </div>
				<div id="navbar-searcharea">
					<input type="text" placeholder="Pesquise seu produto já!" style="margin-right: 0; display: inline; position: relative; float: left; width: 60%;" />
					<div class="button find-button"> </div>
				</div>
			</div>
		</div>

		<!-- Menu de opções (esquerda) -->
		<div class="menu profile-menu" ng-if="active_menu[0]" ng-animate="{enter: 'animate-enter-options', leave: 'animate-leave-options'}">
			<div id="profile_picture"> 
				<img ng-src="{{user.img}}" align=center /> 
			</div> 
			<p id="username">{{user.first_name}}&nbsp;{{user.last_name}}</p>
			<ul style="padding: 0;">
				<li><a href="index.html"> <img src="img/home.png" alt="Retorne para página inicial"> &nbsp;Home </a></li>
				<li><a href="2.htm"> <img src="img/listadesejos.png" alt="Acesse sua lista de desejos"> Lista de Desejos</a></li>
				<li><a href="3.htm"> <img src="img/menucomprados.png" alt="Acesse os produtos já adquiridos">  Produtos adquiridos </a></li>
				<li><a href="4.htm"> <img src="img/userset.png" alt="Configure seus dados"> Dados pessoais </a> </li>
				<li><a href="5.htm"> <img src="img/quemsomos.png" alt="Conheça informações sobre os desenvolvedores"> Quem somos nós </a></li>
			</ul>
		</div>

		<!-- Menu de configurações (direita) -->
		<div class="menu filter-menu" ng-if="active_menu[1]" ng-animate="{enter: 'animate-enter-settings', leave: 'animate-leave-settings'}">
			<center>
				<div class="icon-space" style="padding-top: 60px;">
					<div align="center"> 
						<strong> Você está: </strong> 
					</div>
					<div class="icon left-icon" ng-click="change_filter('walking')" ng-class="{'icon-selected': filter_mode == 'walking'}"> 
						<img src="img/andando.png" alt="Voce está andando?" />
						<p style="float: left; font-size: 13px; margin: 25px 0 0 -3px;"> Andando </p> 
					</div>
					<div class="icon right-icon"  ng-click="change_filter('driving')" ng-class="{'icon-selected': filter_mode == 'driving'}">
						<img src="img/carro.png" style="margin-top: 5px;" alt="Você está dirigindo?" />
						<p style="float: left; font-size: 13px; margin: 20px 0 0 -3px;"> Dirigindo </p> 
					</div>
				</div>
				<strong> Exibir por: </strong>
				<div class="icon-space">
					<div class="icon left-icon" ng-click="change_type_view('list')" ng-class="{'icon-selected': product_view_selected == 'list'}"> 
						<img src="img/lista.png" alt="Modo de exibição de produtos, produtos em lista" />
						<p style="float: left; font-size: 13px; margin: 20px 0 0 -3px;"> Prod. em Lista </p>  
					</div>
					<div class="icon right-icon"  ng-click="change_type_view('block')" ng-class="{'icon-selected': product_view_selected == 'block'}"> 
						<img src="img/block.png" style="margin-top: -3px;" alt="Modo de exibição de prodtuos, produtos em blocos"/> 
						<p style="float: left; font-size: 13px; margin-left: 5px;"> Prod. em Blocos </p>
					</div>
				</div>
				<strong> Classificar por: </strong> 
				<div class="icon-space">
					<div class="icon left-icon" ng-click="change_mode('price')" ng-class="{'icon-selected': sel_mode == 'price'}"> 
						<img src="img/price.png" alt="Classificar produtos por menor preço" />
						<p style="float: left; font-size: 13px; margin: 25px 0 0 5px;"> Preço </p>
					</div>
					<div class="icon right-icon"  ng-click="change_mode('dist')" ng-class="{'icon-selected': sel_mode == 'dist'}">
						<img src="img/distance.png" alt="Classificar produtos por menor distância" />
						<p style="float: left; font-size: 13px; margin: 20px 0 0 -3px;"> Distância </p>
					</div>
				</div>
			</center>
		</div>

		<!-- Comment on the block -->
		<div class="background-comment-block" align="center" ng-show="open_comment_block">
			<!-- Div write comments -->
			<button ng-click="open_comment_block=false">voltar</button>
			<div  class="write-comment align-comment-block">
				<table width="100%">
					<tr>
						<td align="center" width="90px">
							<img ng-src="{{user.img}}" class="avatar-comment" />
							<label id="more-information">{{user.first_name}}</label>
							<label id="more-information">{{user.last_name}}</label>
						</td>
						<td align="center">
							<li>
								<textarea style="width:100%;" rows="5"ng-model="comment" ng-click="show_buttons = true">
								</textarea>
							</li>
							<li align="right" ng-show="show_buttons">
								<div class="btn-product comment" ng-click="comment = ''; show_buttons=false;">Apagar</div>
								<div class="btn-product comment" 
								ng-click="save_comment(comment, list_product_selected); comment=''; show_buttons=false">
									Enviar
								</div>
							</li>
						</td>
					</tr>
				</table>
			</div>

			<!-- All comments -->
			<div class="write-comment comment-color align-comment-block" style="widht:100%;" 
				ng-repeat="user_comment in list_product_selected.comment">
				<table>
					<tr>
						<td align="center" width="90px">
							<img ng-src="{{user_comment.img}}" class="avatar-comment">
							<label id="more-information">{{user_comment.first_name}}</label>
							<label id="more-information">{{user_comment.last_name}}</label>
						</td>
						<td valign="center" width="80%">
							<label ng-if="!edit_comment">
								{{user_comment.comment}}
							</label>
						</td>
						<td valign="top" width="30%">			
							<li align="right">
								<div class="btn-product close" ng-click="delete_comment(list_product_selected.comment, user)">
									x
								</div>
							</li>
						</td>
					</tr>
				</table>
			</div>
		</div>
		
		<!-- Tabela de produtos -->
		<div id="products-view" align="center" ng-switch on="product_view_selected" style="overflow: auto; height: 93%;">
			<!--Product in block-->
			<div class="medium-12 large-12 columns">
				<div class="show-for-small-only">
					<div id="navbar-minisearcharea">
						<input type="text" placeholder="Pesquise aqui seu produto" style="margin-right: 0; display: inline; position: relative; float: left; width: 250px; border-radius: 6px;" />
						<div class="button find-button" style="margin-left: 10px; border-radius: 6px; width:"> </div>
					</div>
				</div>

				<!-- Blocks with products -->
				<ul style="padding: 0;" ng-switch-when="block">
					<li class="list-product-block" ng-repeat="product in products" align="center" 
						style="box-shadow: 6px 6px 5px #888888; height: 7%;" 
						ng-animate="{enter: 'animate-enter-opacity', leave: 'animate-leave-opacity'}">
						<div>
							<p align="left">
								<label id="title-product-block">{{product.name}}</label>
								<hr style="margin:10px">
							</p>
							<p>
								<div class="sobre-img-wrapper">
									<img class="sobre-img" ng-src="{{product.img[0]}}"/>
								</div>
							</p>
							<table width="100%">
								<tr align="left">
									<td>
										<p id="text-produto-block">{{product.shop}}</p>
									</td>
									<td>
										<p id="text-produto-block">{{product.distance}}</p>
									</td>
								</tr>
								<tr align="left">
									<td colspan="2">
										<p id="text-produto-block">{{product.street}}</p>
									</td>
								</tr>
								<tr>
									<td colspan="2" height="40">
										<b><p id="text-produto-block">{{product.price}}</p></b>
									</td>
								</tr>
							</table> 		
							<div class="btn-product" style="float: left;">
								<i class="img-config map-button"></i>
								<label style="padding-right:10px">Mapa</label>
							</div>
							<div class="btn-product" ng-click="comment_block(product);" style="float: right;">
								<i class="img-config comment-button"></i>
								<label style="padding-left:10px">[ {{list_product_selected.comment.length}} ]</label>
								<label>Chat</label>
							</div>
						</div>
					</li>
				</ul>
			</div>

			<!--Product in list - Slid and More information-->
			<div class="medium-12 large-12 small-12 columns" ng-animate="{enter: 'animate-enter-opacity', leave: 'animate-leave-opacity'}">
				<div style="overflow: auto;"ng-switch-when="list" align="center" style="width:100%;">
					<div class="medium-6 large-6 columns">
						<!-- Product slide -->
						<div class="hide-for-small-only view-product-list" style="overflow: auto; box-shadow: 2px 2px 5px #888888; ">
							<label id="title-product-list">{{list_product_selected.name}}</label><hr>

							<li style="list-style: none;" align="center">
								<div ng-repeat="circle in list_product_selected['img']"  class="slid-circles" 
								ng-class="{'selected': circle != image_selected}"
								ng-mouseover="change_image_slide(circle)">
								</div>
							</li>

							<div id="view-slid" align="center">
								<img ng-src="{{image_selected}}" id="image-slid" />
							</div>

							<div style="margin-bottom: 5px;">
								<div class="btn-product" style="float: left;">
									<i class="img-config map-button"></i>
									<label style="padding-right:10px">Mapa</label>
								</div>

								<div class="btn-product more-information" ng-click="show_more_information = !show_more_information" 
									style="margin-top:5px;">
									<label ng-if="!show_more_information">+</label>
									<label ng-if="show_more_information">-</label>
								</div>

								<div class="btn-product" ng-click="open_comment(list_product_selected)" ng-if="!show_comment"
									style="float: right;">
									<i class="img-config comment-button"></i>
									<label style="padding-left:10px">[ {{list_product_selected.comment.length}} ]</label>
									<label>Chat</label>
								</div>

								<div class="btn-product" ng-click="open_comment(list_product_selected)" ng-if="show_comment"
									style="float: right;">
									<i class="img-config comment-button"></i>
									<label style="padding-left:10px">Lista</label>
								</div>
							</div>
						</div>

						<!-- Shop information -->
						<div class="view-product-list" ng-if="show_more_information" 
							ng-animate="{enter: 'animate-enter-opacity', leave: 'animate-leave-opacity'}">
							<table width="100%">
								<tr>
									<td width="15%" valign="center">
										<img ng-src="{{list_product_selected.logo}}" class="logo-shop" />
									</td>
									<td width="90%">
										<table width="100%">
											<tr>
												<td width="65%" valign="center">
													<label id="more-information">{{list_product_selected.shop}}</label>
												</td>
												<td  align="center" width="35%">
													<label id="more-information"><b>{{list_product_selected.price}}</b></label>
												</td>
											</tr>
											<tr>
												<td>
													<label id="more-information">{{list_product_selected.street}}</label>
												</td>
												<td align="center">
													<label id="more-information">{{list_product_selected.distance}}</label>
												</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</div>
					</div>

					<!-- Div with all products -->
					<div class="medium-6 large-6 columns">
						<div style="box-shadow: 2px 2px 5px #888888;"  class="view-product-list fix" ng-if="!show_comment" >
							<div style="border-radius: 4px;" class = "product-list zebra" ng-repeat="product in products" 
								ng-click="selected_new_product(product)" ng-mouseover="houver_new_product(product)"
								ng-class="{'selected': list_product_selected == product}">
								<table width="80%">
									<tr align="center">
										<td width="20%">
											<img ng-src="{{product.img[0]}}" id="image-list" />
										</td>
										<td width="50%">
											<p>{{product.name}}</p>
										</td>
										<td width="20%">
											<label id="text_distance_price_product"><b>{{product.price}}</b></label>
											<p>{{product.distance}}</p>
										</td>
									</tr>
								</table>
							</div>
						</div>

						<!-- Div write comments -->
						<div  class="write-comment"  ng-if="show_comment">
							<table width="100%">
								<tr>
									<td align="center" width="90px">
										<img ng-src="{{user.img}}" class="avatar-comment" />
										<label id="more-information">{{user.first_name}}</label>
										<label id="more-information">{{user.last_name}}</label>
									</td>
									<td align="center">
										<li>
											<textarea rows="5" ng-model="comment" ng-click="show_buttons = true" style="width:100%;"></textarea>
										</li>
										<li align="right" ng-show="show_buttons">
											<div class="btn-product comment" ng-click="comment = ''; show_buttons=false;">Apagar</div>
											<div class="btn-product comment" 
											ng-click="save_comment(comment, list_product_selected); comment=''; show_buttons=false">
												Enviar
											</div>
										</li>
									</td>
								</tr>
							</table>
						</div>

						<!-- All comments -->
						<div ng-if="show_comment">
							<div class="write-comment comment-color" ng-repeat="user in list_product_selected.comment">
								<table>
									<tr>
										<td align="center" width="90px">
											<img ng-src="{{user.img}}" class="avatar-comment" />
											<label id="more-information">{{user.first_name}}</label>
											<label id="more-information">{{user.last_name}}</label>
										</td>
										<td valign="center" width="80%">
											<label ng-if="!edit_comment">
												{{user.comment}}
											</label>
										</td>
										<td valign="top" width="30%">			
											<li align="right">
												<div class="btn-product close" ng-click="delete_comment(list_product_selected.comment, user)">
													x
												</div>
											</li>
										</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		$(document).foundation();
	</script>
</html>

<!-- http://www.nganimate.org/angularjs/ng-repeat/3d-rotate para faze as pesquisas -->

