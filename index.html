<!DOCTYPE html>
<html ng-app ng-controller="index_ctr">
	<head>
		<title>FastFind - Your desires on a screen</title>
		<meta name="keywords" content="produtos products produto product venda vendas sell loja shopping pesquisa" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8">
		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="css/block_product.css">
		<link rel="stylesheet" type="text/css" href="css/list_product.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<link rel="stylesheet" type="text/css" href="css/animation.css">
		<link rel="stylesheet" type="text/css" href="css/menu.css">
		<link rel="stylesheet" type="text/css" href="css/button_product.css">
		<link rel="stylesheet" href="css/foundation.min.css" >
		<!-- js -->
		<script src="angular.js"></script>
		<script src="index.js"></script>
	</head>

	<body>
		<!-- Comment on the block -->
		<div class="background-comment-block" align="center" ng-show="open_comment_block">
			<!-- Div write comments -->
			<div  class="write-comment align-comment-block">
				<table>
					<tr>
						<td align="center" width="90px">
							<img ng-src="{{user.img}}" class="avatar-comment" />
							<label id="more-information">{{user.first_name}}</label>
							<label id="more-information">{{user.last_name}}</label>
						</td>
						<td align="center">
							<li>
								<textarea cols="55" rows="5"ng-model="comment" ng-click="show_buttons = true">
								</textarea>
							</li>
							<li align="right" ng-show="show_buttons">
								<button ng-click="comment = ''; show_buttons=false" style="background-color:red;">
									Apagar
								</button>
								<button ng-click="save_comment(comment, list_product_selected); comment=''; show_buttons=false" 
								style="background-color:blue;">
									Enviar
								</button>
							</li>
						</td>
					</tr>
				</table>
				<button ng-click="open_comment_block=false">voltar</button>
			</div>

			<!-- All comments -->
			<div class="write-comment comment-color align-comment-block" style="widht:100%;" 
			ng-repeat="user_comment in list_product_selected.comment">
			<table>
				<tr>
					<td align="center" width="90px">
						<img ng-src="{{user_comment.img}}" class="avatar-comment">
						<label id="more-information">{{user_comment.first_name}}</label>
						<label id="more-information">{{user_comment.last_name}}</label>
					</td>
					<td valign="center" width="80%">
						<label ng-if="!edit_comment">
							{{user_comment.comment}}
						</label>
					</td>
					<td>			
						<li align="right">
							<button style="background-color:red;" 
							ng-click="delete_comment(list_product_selected.comment, user_comment)">
								Apagar
							</button>
						</li>
					</td>
				</tr>
			</table>
			</div>
		</div>

		<!-- Navbar -->
		<div class="row">
			<div class="large-12 columns" id="navbar">
				<div id="navbar-bottomspace"> </div>
				<div class="button profile-menu-button" ng-click="active_menu[0] = !active_menu[0]"> </div>
				<div class="button filter-menu-button" ng-click="active_menu[1] = !active_menu[1]"></div>
				<div id="navbar-text" align="center"> FastFind </div>
				<div class="button find-button" ng-click="open_find =!open_find"> </div>
				<div ng-if="open_find" ng-animate="{enter: 'animate-enter-opacity', leave: 'animate-leave-opacity'}" 
					id="navbar-	searcharea" style="margin-left: 120px;"> 
					<input type="text"></input>
					<input type="submit" value="BUSCAR"></button>
				</div>
			</div>
		</div>

		<!-- Tabela de produtos -->
		<div id="products-view" align="left" ng-switch on="product_view_selected">

			<!--Product in block-->
			<ul ng-switch-when="block">
				<li class="list-product-block" ng-repeat="product in products" align="center">
					<div>
						<p align="left">
							<label id="title-product-block">{{product.name}}</label>
							<hr style="margin:10px">
						</p>
						<p>
							<div style="height:160px;">
								<img ng-src="{{product.img[0]}}" id="image-block">
							</div>
						</p>
						<p>
							<table width="100%">
								<tr align="left">
									<td>
										<p id="text-produto-block">{{product.shop}}</p>
									</td>
									<td>
										<p id="text-produto-block">{{product.distance}}</p>
									</td>
								</tr>
								<tr align="left">
									<td colspan="2">
										<p id="text-produto-block">{{product.street}}</p>
									</td>
								</tr>
								<tr>
									<td colspan="2" height="40">
										<b><p id="text-produto-block">{{product.price}}</p></b>
									</td>
								</tr>
							</table>
						</p>
						<p>
							<button>Mapa</button>
							<button ng-click="comment_block(product);">
								Comentario ({{product.comment.length}})
							</button>
						</p>
					</div>
				</li>
			</ul>

			<!--Product in list - Slid and More information-->
			<div ng-switch-when="list" align="center" style="width:100%;">
				<div class="align-list">
					<!-- Product slide -->
					<div class="view-product-list">
						<label id="title-product-list">{{list_product_selected.name}}</label><hr>

						<li style="list-style: none;" align="center">
							<div ng-repeat="circle in list_product_selected['img']"  class="slid-circles" 
							ng-class="{'selected': circle != image_selected}"
							ng-mouseover="change_image_slide(circle)">
							</div>
						</li>

						<div id="view-slid" align="center">
							<img ng-src="{{image_selected}}" id="image-slid">
						</div>

						<div style="margin-bottom: 5px;">
							<div class="btn-product" style="float: left;">
								<i class="img-config map-button"></i>
								<label style="padding-right:18px">Mapa</label>
							</div>

							<div class="btn-product more-information" ng-click="show_more_information = !show_more_information" 
								style="margin-top:5px;">
								<label ng-if="!show_more_information">+</label>
								<label ng-if="show_more_information">-</label>
							</div>

							<div class="btn-product" ng-click="open_comment(list_product_selected)" ng-if="!show_comment"
								style="float: right;">
								<i class="img-config comment-button"></i>
								<label style="padding-left:18px">[ {{list_product_selected.comment.length}} ]</label>
								<label>Chat</label>
							</div>

							<div class="btn-product" ng-click="open_comment(list_product_selected)" ng-if="show_comment"
								style="float: right;">
								<i class="img-config comment-button"></i>
								<label style="padding-left:18px">Lista</label>
							</div>
						</div>
				</div>

				<!-- Shop information -->
				<div class="view-product-list" ng-if="show_more_information" 
				ng-animate="{enter: 'animate-enter-opacity', leave: 'animate-leave-opacity'}">
					<table width="100%">
						<tr>
							<td width="15%" valign="center">
								<img ng-src="{{list_product_selected.logo}}" class="logo-shop">
							</td>
							<td width="90%">
								<table width="100%">
									<tr>
										<td width="65%" valign="center">
											<label id="more-information">{{list_product_selected.shop}}</label>
										</td>
										<td  align="center" width="35%">
											<b><label id="more-information">{{list_product_selected.price}}<b></label>
										</td>
									</tr>
									<tr>
										<td>
											<label id="more-information">{{list_product_selected.street}}</label>
										</td>
										<td align="center">
											<label id="more-information">{{list_product_selected.distance}}</label>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</div>
			</div>

			<!-- Div with all products -->
			<div class="view-product-list align-list" ng-if="!show_comment">
				<div class = "product-list" ng-repeat="product in products" 
				ng-click="selected_new_product(product)" ng-mouseover="houver_new_product(product)"
				ng-class="{'selected': list_product_selected == product}" >
					<table width="80%">
						<tr align="center">
							<td width="20%">
								<img ng-src="{{product.img[0]}}" id="image-list">
							</td>
							<td width="50%">
								<p>{{product.name}}</p>
							</td>
							<td width="20%">
								<label id="text_distance_price_product"><b>{{product.price}}</b></label>
								<p>{{product.distance}}</p>
							</td>
						</tr>
					</table>
				</div>
			</div>

			<!-- Div write comments -->
			<div  class="write-comment align-list"  ng-if="show_comment">
				<table>
					<tr>
						<td align="center" width="90px">
							<img ng-src="{{user.img}}" class="avatar-comment">
							<label id="more-information">{{user.first_name}}</label>
							<label id="more-information">{{user.last_name}}</label>
						</td>
						<td align="center">
							<li>
								<textarea cols="55" rows="5"ng-model="comment" ng-click="show_buttons = true">
								</textarea>
							</li>
							<li align="right" ng-show="show_buttons">
								<button ng-click="comment = ''; show_buttons=false" style="background-color:red;">
									Apagar
								</button>
								<button ng-click="save_comment(comment, list_product_selected); comment=''; show_buttons=false" 
								style="background-color:blue;">
									Enviar
								</button>
							</li>
						</td>
					</tr>
				</table>
			</div>

			<!-- All comments -->
			<div class="align-list" ng-if="show_comment">
				<div class="write-comment comment-color align-comment" ng-repeat="user in list_product_selected.comment">
					<table>
						<tr>
							<td align="center" width="90px">
								<img ng-src="{{user.img}}" class="avatar-comment">
								<label id="more-information">{{user.first_name}}</label>
								<label id="more-information">{{user.last_name}}</label>
							</td>
							<td valign="center" width="80%">
								<label ng-if="!edit_comment">
									{{user.comment}}
								</label>
							</td>
							<td>			
								<li align="right">
									<button style="background-color:red;" 
									ng-click="delete_comment(list_product_selected.comment, user)">
										Apagar
									</button>
								</li>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>

		<!-- Menu de opções (esquerda) -->
		<div class="menu profile-menu" ng-if="active_menu[0]" ng-animate="{enter: 'animate-enter-options', leave: 'animate-leave-options'}">
			<div id="profile_picture"> 
				<img ng-src="{{user.img}}" align=center> 
			</div> 
			<p id="username">{{user.first_name}}&nbsp;{{user.last_name}}</p>
			<ul style="padding: 0;">
				<li><a href="#"> <img src="img/hom.png" alt="Retorne para página inicial"> Home </a></li>
				<li><a href="#"> <img src="img/listadesejos.png" alt="Acesse sua lista de desejos"> Lista de Desejos</a></li>
				<li><a href="#"> <img src="img/menucomprados.png" alt="Acesse os produtos já adquiridos">  Produtos adquiridos </a></li>
				<li><a href="#"> <img src="img/userset.png" alt="Configure seus dados"> Dados pessoais </a> </li>
				<li><a href="#"> <img src="img/quemsomos.png" alt="Sobre nós">  Quem somos nós </a></li>
			</ul>
		</div>

		<!-- Menu de configurações (direita) -->
		<div class="menu filter-menu" ng-if="active_menu[1]" ng-animate="{enter: 'animate-enter-settings', leave: 'animate-leave-settings'}">
			<center>
				<div class="icon-space" style="padding-top: 60px;">
					<div align="center"> Você está: </div>
					<div class="icon left-icon"> [ICO] Dirigindo</div>
					<div class="icon right-icon"> [ICO] Caminhando </div>
				</div>
				Exibir por:
				<div class="icon-space">
					<div class="icon left-icon" ng-click="change_type_view('list')"> 
						<img src="img/lista.png" alt="Modo de exibição de produtos: lista" /> 
					</div>
					<div class="icon right-icon"  ng-click="change_type_view('block')"> 
						<img src="img/bloco.png" alt="Modo de exibição de prodtuos: blocos"/> 
					</div>
				</div>
				Classificar por: 
				<div class="icon-space">
					<div class="icon left-icon"> [ICO] Menor Preço </div>
					<div class="icon right-icon"> [ICO] Menor Distância </div>
				</div>
			</center>
		</div>
	</body>
</html>

<!-- http://www.nganimate.org/angularjs/ng-repeat/3d-rotate para faze as pesquisas -->